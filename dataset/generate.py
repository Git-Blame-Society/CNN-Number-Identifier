import random

# 10x10 templates for digits 0-9 (very rough)
templates = {
    '0': ["...*##*...",
          ".*#*.*#*..",
          "*#*...*#*.",
          "*#*...*#*.",
          "*#*...*#*.",
          "*#*...*#*.",
          "*#*...*#*.",
          "*#*...*#*.",
          ".*#*.*#*..",
          "..*##*...."],

    '1': ["....#*....",
          "...##*....",
          "..#*#*....",
          ".#..#*....",
          "*...#*....",
          "....#*....",
          "....#*....",
          "....#*....",
          "...*#*....",
          ".*######*."],

    '2': ["..*##*....",
          ".#...*#...",
          "*....*#...",
          ".....*#...",
          ".....#*...",
          "....*#....",
          "....*.....",
          "...#*.....",
          "..#*......",
          ".*####**.."],

    '3': ["...*##*...",
          "..*...#*..",
          "......#*..",
          "......#*..",
          "...**#....",
          "......#*..",
          "......#*..",
          "......#*..",
          "..*...#*..",
          "...*##*..."],

    '4': ["........*.",
          "......*#..",
          ".....#*...",
          "...*#.....",
          "..*#...*..",
          ".#*....#..",
          "*#######*.",
          ".......#..",
          ".......#..",
          ".......*..",],

    '5': ["..*#####*.",
          ".*#.......",
          ".*#.......",
          ".##.......",
          ".*#.*#*...",
          "..#*...#.",
          ".......*#.",
          "#......*#.",
          ".#*....#..",
          "...*##*...",],

    '6': ["......*#.",
          "....*#....",
          "...#*.....",
          "..#.......",
          ".#*.......",
          ".*#####*..",
          "#......*#.",
          "#*......#.",
          ".#*....*#.",
          "..*###*...",],

    '7': [".*######*.",
          "......*#*.",
          "......#*..",
          ".....#*...",
          "...#*.....",
          "..#*......",
          ".#*.......",
          ".#*.......",
          ".#*.......",
          ".#*.......",],

    '8': [".*####*...",
          "#.....*#..",
          "*#....#...",
          "..*##*....",
          "..###*...",
          "#*.....#..",
          "#......*#.",
          "#*.....*#.",
          ".#.....#..",
          "..*###*..",],

    '9': ["...**.....",
          ".*#*#*...",
          "#*....#...",
          "#*....*#..",
          ".#....*#..",
          "..*###**..",
          ".....*#...",
          "...*#.....",
          ".*#.......",
          "#*........",],
    # ... add digits 4-9 similarly or reuse patterns
}

def perturb(line):
    """Randomly change some pixels in a line"""
    line = list(line.ljust(10, '.'))
    for i in range(10):
        if random.random() < 0.05:  # 5% chance flip pixel
            line[i] = '*' if line[i]=='.' else '.'
    return ''.join(line)

def generate_sample(digit):
    template = templates[digit]
    img = []
    while len(img) < 10:
        img.append(perturb(template[len(img) % len(template)]))
    return img

def write_dataset(filename, n_samples_per_digit):
    with open(filename, 'w') as f:
        for digit in map(str, range(10)):  #0-9 for demo
            for _ in range(n_samples_per_digit):
                f.write(f"{digit}\n")
                img = generate_sample(digit)
                for line in img:
                    f.write(line+'\n')
                f.write('\n')

# Generate 100 training samples (25 per digit 0-9)
write_dataset('train_ascii.txt', 25)
# Generate 10 test samples (5 per digit)
write_dataset('test_ascii.txt', 5)
